{"remainingRequest":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/src/views/memberlisting/MemberListingForm.vue?vue&type=style&index=0&id=40a4fb44&scoped=true&lang=css&","dependencies":[{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/src/views/memberlisting/MemberListingForm.vue","mtime":1675226480949},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/css-loader/index.js","mtime":1673859901298},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673859901889},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/postcss-loader/lib/index.js","mtime":1673859901606},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673859901490},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/vue-loader/lib/index.js","mtime":1673859901853}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.btn-menu {\n  color: #ffffff;\n  background-color: #ced4da;\n  margin-right: 7px;\n  min-width: 130px;\n}\n.btn.router-link-exact-active {\n  background-color: #D6DF23;\n}\nform {\n  max-width: 350px;\n  margin: auto;\n}\nform img {\n  max-width: 350px;\n  border: solid 1px #6c757d;\n}\n",{"version":3,"sources":["MemberListingForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MemberListingForm.vue","sourceRoot":"src/views/memberlisting","sourcesContent":["<template>\n    <Layout>\n        <div slot=\"buttons\" class=\"form-group\">\n            <router-link class=\"btn btn-menu\" :to=\"{ name:'memberlisting-list' }\">รายการข้อมูล</router-link>\n            <router-link class=\"btn btn-menu\" :to=\"{ name:'memberlisting-form' }\">เพิ่มข้อมูลใหม่</router-link>\n        </div>\n        <div class=\"card\">\n            <div class=\"card-body\">\n                <header>\n                    <h5><i class=\"fa fa-edit\"></i> เพิ่ม/แก้ไข ข้อมูลสมาชิก</h5>\n                </header>\n                <hr>\n                \n                <form @submit.prevent=\"onSubmit()\">\n                    <div class=\"form-group\">\n                        <label for=\"\">โทรศัพท์</label>\n                        <input type=\"text\" name=\"m_phone\"\n                            v-model.trim=\"form.m_phone\" \n                            v-validate=\"{ required: true }\"\n                            :class=\"{ 'is-invalid': errors.has('m_phone') }\"\n                            class=\"form-control\">\n                        <p class=\"invalid-feedback\">{{ errors.first('m_phone') }}</p>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"\">ทะเบียน</label>\n                        <input type=\"text\" name=\"m_membercar\"\n                            v-model.trim=\"form.m_membercar\" \n                            v-validate=\"{ required: true }\"\n                            :class=\"{ 'is-invalid': errors.has('m_membercar') }\"\n                            class=\"form-control\">\n                        <p class=\"invalid-feedback\">{{ errors.first('m_membercar') }}</p>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"\">ชื่อ</label>\n                        <input type=\"text\" name=\"m_name\"\n                            v-model.trim=\"form.m_name\" \n                            v-validate=\"{ required: true }\"\n                            :class=\"{ 'is-invalid': errors.has('m_name') }\"\n                            class=\"form-control\">\n                        <p class=\"invalid-feedback\">{{ errors.first('m_name') }}</p>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"\">อาชีพ</label>\n                        <input type=\"text\" name=\"m_career\"\n                            v-model.trim=\"form.m_career\" \n                            v-validate=\"{ required: true }\"\n                            :class=\"{ 'is-invalid': errors.has('m_career') }\"\n                            class=\"form-control\">\n                        <p class=\"invalid-feedback\">{{ errors.first('m_career') }}</p>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"\">อีเมล</label>\n                        <input type=\"text\" name=\"m_email\"\n                            v-model.trim=\"form.m_email\" \n                            v-validate=\"{ required: true }\"\n                            :class=\"{ 'is-invalid': errors.has('m_email') }\"\n                            class=\"form-control\">\n                        <p class=\"invalid-feedback\">{{ errors.first('m_email') }}</p>\n                    </div>\n\n                    \n\n                    <div class=\"form-group mt-4 mb-5\">\n                        <div class=\"row\">\n                            <div class=\"col-sm-6\">\n                                <button type=\"submit\" class=\"btn btn-info btn-block\">\n                                    บันทึกข้อมูล\n                                </button>\n                            </div>\n                            <div class=\"col-sm-6\">\n                                <router-link :to=\"{ name: 'equipment-list' }\" class=\"btn btn-danger btn-block\">\n                                    ยกเลิก\n                                </router-link>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </Layout>\n</template>\n\n<script>\nimport Layout from \"@/components/Layout\";\nimport Axios from \"axios\";\nexport default {\n  components: {\n    Layout\n  },\n  data() {\n    return {\n      form: {\n        m_phone: \"\",\n        m_membercar: \"\",\n        m_name: \"\",\n        m_career: \"\",\n        m_email: \"\"\n      }\n    };\n  },\n  mounted() {\n    this.initialUpdateItem();\n  },\n  watch: {\n    \"$route.query.id\"() {\n      this.form = {\n        m_phone: \"\",\n        m_membercar: \"\",\n        m_name: \"\",\n        m_career: \"\",\n        m_email: \"\"\n      };\n      this.$validator.reset();\n    }\n  },\n  methods: {\n    // ส่งข้อมูลไปยัง Backend\n    onSubmit() {\n      this.$validator.validateAll().then(valid => {\n        if (!valid) return;\n        // if (this.jquery.trim(this.form.eq_image) == \"\")\n        //   return this.alertify.warning(\"กรุณาอัพโหลดภาพ\");\n        // ตรวจสอบว่าเป็น การแก้ไขหรือการเพิ่มใหม่\n        const updateId = this.$router.currentRoute.query.id;\n        const request = isNaN(updateId)\n          ? Axios.post(\"/api/memberlisting\", this.form) // สร้างใหม่\n          : Axios.put(`/api/memberlisting/${updateId}`, this.form); // แก้ไข\n        // ส่งข้อมูลไปหา Server\n        request\n          .then(res => this.$router.push({ name: \"memberlisting-list\" }))\n          .catch(error => this.alertify.error(error.response.data.message));\n      });\n    },\n    // เปลี่ยนไฟล์อัพโหลดเป็น Base64 string\n    // onChangeFile(input) {\n    //   this.form.eq_image = \"\";\n    //   if (input.files && input.files.length > 0) {\n    //     const file = input.files[0];\n    //     if (file.type.indexOf(\"image/\") >= 0) {\n    //       const reader = new FileReader();\n    //       reader.readAsDataURL(file);\n    //       reader.addEventListener(\"load\", () => {\n    //         this.form.eq_image = reader.result;\n    //       });\n    //       return;\n    //     }\n    //   }\n    //   this.alertify.warning(\"กรุณาเลือกภาพที่จะอัพโหลด !\");\n    // },\n    // นำข้อมูลจาก Server ไปใส่ใน Form เพื่อทำการ update ใหม่\n    initialUpdateItem() {\n      const id = this.$route.query.id;\n      if (isNaN(id)) return;\n      Axios.get(`/api/memberlisting/${id}`)\n        .then(res => {\n          const form = res.data;\n          this.form.m_phone = form.m_phone;\n          this.form.m_membercar = form.m_membercar;\n          this.form.m_name = form.m_name;\n          this.form.m_career = form.m_career;\n          this.form.m_email = form.m_email;\n        })\n        .catch(() => this.$router.push({ name: \"memberlisting-list\" }));\n    }\n  }\n};\n</script>\n\n<style scoped>\n.btn-menu {\n  color: #ffffff;\n  background-color: #ced4da;\n  margin-right: 7px;\n  min-width: 130px;\n}\n.btn.router-link-exact-active {\n  background-color: #D6DF23;\n}\nform {\n  max-width: 350px;\n  margin: auto;\n}\nform img {\n  max-width: 350px;\n  border: solid 1px #6c757d;\n}\n</style>\n\n"]}]}