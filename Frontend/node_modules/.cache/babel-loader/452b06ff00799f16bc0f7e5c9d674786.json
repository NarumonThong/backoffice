{"remainingRequest":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/babel-loader/lib/index.js!/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/src/views/booking/BookingManageList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/src/views/booking/BookingManageList.vue","mtime":1675021420576},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673859901490},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/babel-loader/lib/index.js","mtime":1673859901657},{"path":"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/vue-loader/lib/index.js","mtime":1673859901853}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport _objectSpread from \"/Users/Projects/Vuejs/Node_Vue_BackOffice/Frontend/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Layout from \"@/components/Layout\";\nimport Search from \"@/components/Search\";\nimport Pagination from \"@/components/Pagination\";\nimport { mapState } from \"vuex\";\nimport Axios from \"axios\";\nexport default {\n  components: {\n    Layout: Layout,\n    Search: Search,\n    Pagination: Pagination\n  },\n  computed: _objectSpread({}, mapState([\"bookings\"])),\n  data: function data() {\n    return {\n      search_types: [{\n        name: \"หัวข้อประชุม\",\n        value: \"bk_title\"\n      }, {\n        name: \"วันที่เริ่ม\",\n        value: \"bk_time_start\",\n        type: \"date\"\n      }, {\n        name: \"วันที่สิ้นสุด\",\n        value: \"bk_time_end\",\n        type: \"date\"\n      }],\n      page: 1,\n      search: {}\n    };\n  },\n  mounted: function mounted() {\n    this.initialLoadBooking();\n  },\n  methods: {\n    // ลบข้อมูลการจอง\n    onDelete: function onDelete(item) {\n      var _this = this;\n\n      this.alertify.confirm(\"คุณต้องการทำรายการต่อไปหรือไม่?\", function () {\n        Axios.delete(\"/api/booking/manage/\".concat(item.bk_id)).then(function (response) {\n          return _this.initialLoadBooking();\n        }).catch(function (error) {\n          return _this.alertify.error(error.response.data.message);\n        });\n      });\n    },\n    // เปลี่ยนสถานะการจองห้องประชุม\n    onUpdateStatus: function onUpdateStatus(bk_status, item) {\n      var _this2 = this;\n\n      this.alertify.confirm(\"คุณต้องการทำรายการต่อไปหรือไม่?\", function () {\n        Axios.put(\"/api/booking/manage/\".concat(item.bk_id), {\n          bk_status: bk_status\n        }).then(function (response) {\n          return _this2.initialLoadBooking();\n        }).catch(function (error) {\n          return _this2.alertify.error(error.response.data.message);\n        });\n      });\n    },\n    // เปลี่ยน สถานะการจองเป็น ชื่อ class\n    getApplyStatusClass: function getApplyStatusClass(item) {\n      var statusClass = {};\n      statusClass[item.bk_status] = true;\n      return statusClass;\n    },\n    // ค้นหาข้อมูล\n    onSearch: function onSearch(search) {\n      this.search = search;\n      this.$store.dispatch(\"set_bookings\", _objectSpread({\n        page: 1\n      }, this.search));\n    },\n    // แบ่งหน้าเพจ\n    onPage: function onPage(page) {\n      this.page = page;\n      this.$store.dispatch(\"set_bookings\", _objectSpread({\n        page: this.page\n      }, this.search));\n    },\n    // โหลดข้อมูลรายการจองห้องประชุม\n    initialLoadBooking: function initialLoadBooking() {\n      this.$store.dispatch(\"set_bookings\");\n    }\n  }\n};",{"version":3,"sources":["BookingManageList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,OAAA,MAAA,MAAA,qBAAA;AACA,OAAA,MAAA,MAAA,qBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AACA,SAAA,QAAA,QAAA,MAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,cAAA;AACA,kBADA;AAEA,kBAFA;AAGA;AAHA,GADA;AAMA,8BACA,SAAA,CAAA,UAAA,CAAA,CADA,CANA;AASA,MATA,kBASA;AACA,WAAA;AACA,oBAAA,CACA;AAAA,cAAA,cAAA;AAAA,eAAA;AAAA,OADA,EAEA;AAAA,cAAA,aAAA;AAAA,eAAA,eAAA;AAAA,cAAA;AAAA,OAFA,EAGA;AAAA,cAAA,eAAA;AAAA,eAAA,aAAA;AAAA,cAAA;AAAA,OAHA,CADA;AAMA,YAAA,CANA;AAOA,cAAA;AAPA,KAAA;AASA,GAnBA;AAoBA,SApBA,qBAoBA;AACA,SAAA,kBAAA;AACA,GAtBA;AAuBA,WAAA;AACA;AACA,YAFA,oBAEA,IAFA,EAEA;AAAA;;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,iCAAA,EAAA,YAAA;AACA,cAAA,MAAA,+BAAA,KAAA,KAAA,GACA,IADA,CACA;AAAA,iBAAA,MAAA,kBAAA,EAAA;AAAA,SADA,EAEA,KAFA,CAEA;AAAA,iBAAA,MAAA,QAAA,CAAA,KAAA,CAAA,MAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AAAA,SAFA;AAGA,OAJA;AAKA,KARA;AASA;AACA,kBAVA,0BAUA,SAVA,EAUA,IAVA,EAUA;AAAA;;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,iCAAA,EAAA,YAAA;AACA,cAAA,GAAA,+BAAA,KAAA,KAAA,GAAA;AAAA;AAAA,SAAA,EACA,IADA,CACA;AAAA,iBAAA,OAAA,kBAAA,EAAA;AAAA,SADA,EAEA,KAFA,CAEA;AAAA,iBAAA,OAAA,QAAA,CAAA,KAAA,CAAA,MAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AAAA,SAFA;AAGA,OAJA;AAKA,KAhBA;AAiBA;AACA,uBAlBA,+BAkBA,IAlBA,EAkBA;AACA,UAAA,cAAA,EAAA;AACA,kBAAA,KAAA,SAAA,IAAA,IAAA;AACA,aAAA,WAAA;AACA,KAtBA;AAuBA;AACA,YAxBA,oBAwBA,MAxBA,EAwBA;AACA,WAAA,MAAA,GAAA,MAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,cAAA;AAAA,cAAA;AAAA,SAAA,KAAA,MAAA;AACA,KA3BA;AA4BA;AACA,UA7BA,kBA6BA,IA7BA,EA6BA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,cAAA;AACA,cAAA,KAAA;AADA,SAEA,KAAA,MAFA;AAIA,KAnCA;AAoCA;AACA,sBArCA,gCAqCA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,cAAA;AACA;AAvCA;AAvBA,CAAA","sourcesContent":["<template>\n    <Layout>\n        <div class=\"card\">\n            <div class=\"card-body\">\n                <header class=\"mb-4\">\n                    <Search :types=\"search_types\" @onSearch=\"onSearch($event)\" />\n                    <h5><i class=\"fa fa-list-alt\"></i> รายการข้อมูลจองห้องประชุม</h5>\n                </header>\n\n                 <table class=\"table\">\n                    <thead>\n                        <tr>\n                            <th>#</th>\n                            <th>หัวข้อประชุม</th>\n                            <th>วัน-เวลาเริ่ม</th>\n                            <th>วัน-เวลาสิ้นสุด</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        <tr v-for=\"item in bookings.result\" :key=\"item.bk_id\" :class=\"getApplyStatusClass(item)\">\n                            <td>{{ item.bk_id }}</td>\n                            <td>{{ item.bk_title }}</td>\n                            <td>{{ item.bk_time_start }}</td>\n                            <td>{{ item.bk_time_end }}</td>\n                            <td class=\"btns\">\n                                <div v-if=\"item.bk_status === 'pending'\">\n                                    <button @click=\"onUpdateStatus('allowed', item)\" class=\"btn btn-sm btn-warning mr-2\">\n                                        <i class=\"fa fa-check-circle\"></i> อนุมัติ\n                                    </button>\n\n                                    <button @click=\"onUpdateStatus('not allowed', item)\" class=\"btn btn-sm btn-danger\">\n                                        <i class=\"fa fa-times-circle\"></i> ไม่อนุมัติ\n                                    </button>\n                                </div>\n\n                                <div v-if=\"item.bk_status === 'allowed'\">\n                                    <i class=\"fa fa-check-circle\"></i> อนุมัติแล้ว\n                                </div>\n\n                                <div v-if=\"item.bk_status === 'not allowed'\">\n                                    <i class=\"fa fa-times-circle\"></i> ไม่อนุมัติ\n\n                                    <button @click=\"onDelete(item)\" class=\"btn btn-sm btn-danger ml-2\">\n                                        <i class=\"fa fa-trash\"></i> ลบทิ้ง\n                                    </button>\n                                </div>\n                            </td>\n                        </tr>\n                    </tbody>\n                 </table>\n                 <Pagination :data=\"bookings\" :page=\"page\" @onPage=\"onPage($event)\" />\n            </div>\n        </div>\n    </Layout>\n</template>\n\n<script>\nimport Layout from \"@/components/Layout\";\nimport Search from \"@/components/Search\";\nimport Pagination from \"@/components/Pagination\";\nimport { mapState } from \"vuex\";\nimport Axios from \"axios\";\nexport default {\n  components: {\n    Layout,\n    Search,\n    Pagination\n  },\n  computed: {\n    ...mapState([\"bookings\"])\n  },\n  data() {\n    return {\n      search_types: [\n        { name: \"หัวข้อประชุม\", value: \"bk_title\" },\n        { name: \"วันที่เริ่ม\", value: \"bk_time_start\", type: \"date\" },\n        { name: \"วันที่สิ้นสุด\", value: \"bk_time_end\", type: \"date\" }\n      ],\n      page: 1,\n      search: {}\n    };\n  },\n  mounted() {\n    this.initialLoadBooking();\n  },\n  methods: {\n    // ลบข้อมูลการจอง\n    onDelete(item) {\n      this.alertify.confirm(\"คุณต้องการทำรายการต่อไปหรือไม่?\", () => {\n        Axios.delete(`/api/booking/manage/${item.bk_id}`)\n          .then(response => this.initialLoadBooking())\n          .catch(error => this.alertify.error(error.response.data.message));\n      });\n    },\n    // เปลี่ยนสถานะการจองห้องประชุม\n    onUpdateStatus(bk_status, item) {\n      this.alertify.confirm(\"คุณต้องการทำรายการต่อไปหรือไม่?\", () => {\n        Axios.put(`/api/booking/manage/${item.bk_id}`, { bk_status })\n          .then(response => this.initialLoadBooking())\n          .catch(error => this.alertify.error(error.response.data.message));\n      });\n    },\n    // เปลี่ยน สถานะการจองเป็น ชื่อ class\n    getApplyStatusClass(item) {\n      const statusClass = {};\n      statusClass[item.bk_status] = true;\n      return statusClass;\n    },\n    // ค้นหาข้อมูล\n    onSearch(search) {\n      this.search = search;\n      this.$store.dispatch(\"set_bookings\", { page: 1, ...this.search });\n    },\n    // แบ่งหน้าเพจ\n    onPage(page) {\n      this.page = page;\n      this.$store.dispatch(\"set_bookings\", {\n        page: this.page,\n        ...this.search\n      });\n    },\n    // โหลดข้อมูลรายการจองห้องประชุม\n    initialLoadBooking() {\n      this.$store.dispatch(\"set_bookings\");\n    }\n  }\n};\n</script>\n\n\n<style scoped>\n.btns {\n  width: 200px;\n  text-align: right;\n}\n.btns .btn {\n  width: 82px;\n}\n\ntr.allowed td {\n  color: #28a745;\n}\n\ntr.not.allowed td {\n  color: #dc3545;\n}\n</style>\n\n"],"sourceRoot":"src/views/booking"}]}